<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>My Movie List</title>
    <style>
        /* ê°„ë‹¨í•œ ìŠ¤íƒ€ì¼ì„ ì¶”ê°€í•©ë‹ˆë‹¤ */
        body { font-family: sans-serif; margin: 2em; }
        #movie-list { list-style: none; padding: 0; display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1em; }
        li { border: 1px solid #ccc; border-radius: 8px; padding: 1em; text-align: center; }
        img { max-width: 100%; height: auto; border-radius: 4px; }
        h3 { margin: 0.5em 0; }
    </style>
</head>
<body>

<h1>ğŸ¬ ì¸ê¸° ì˜í™” ëª©ë¡</h1>

<ul id="movie-list"></ul>

<script>
    // ===== ì—¬ê¸°ì„œë¶€í„° ìƒˆë¡œ ì¶”ê°€ëœ JavaScript ì½”ë“œì…ë‹ˆë‹¤! =====

    // ì›¹ í˜ì´ì§€ì˜ ëª¨ë“  HTML ìš”ì†Œê°€ ë¡œë“œëœ í›„ì— ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
    document.addEventListener('DOMContentLoaded', () => {

        // ìš°ë¦¬ ì„œë²„ì˜ APIì— GET ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
        fetch('/api/movies')
            .then(response => response.json()) // ì‘ë‹µì„ JSON í˜•íƒœë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
            .then(movies => { // ë³€í™˜ëœ ì˜í™” ëª©ë¡(ë°°ì—´) ë°ì´í„°ë¥¼ ë°›ìŠµë‹ˆë‹¤.

                // idê°€ 'movie-list'ì¸ <ul> íƒœê·¸ë¥¼ ì°¾ìŠµë‹ˆë‹¤.
                const movieList = document.getElementById('movie-list');

                // ì˜í™” ëª©ë¡ì„ í•˜ë‚˜ì”© ëŒë©´ì„œ í™”ë©´ì— ì¶”ê°€í•©ë‹ˆë‹¤.
                movies.forEach(movie => {
                    // <li> íƒœê·¸ë¥¼ í•˜ë‚˜ ë§Œë“­ë‹ˆë‹¤.
                    const listItem = document.createElement('li');

                    // í¬ìŠ¤í„° ì´ë¯¸ì§€ URLì„ ì™„ì„±í•©ë‹ˆë‹¤. TMDBëŠ” ì´ë¯¸ì§€ ê¸°ë³¸ ì£¼ì†Œì™€ íŒŒì¼ ê²½ë¡œë¥¼ ì¡°í•©í•´ì•¼ í•©ë‹ˆë‹¤.
                    const imageUrl = `https://image.tmdb.org/t/p/w200${movie.posterPath}`;

                    // <li> íƒœê·¸ ì•ˆì— ë“¤ì–´ê°ˆ HTML ë‚´ìš©ì„ ë§Œë“­ë‹ˆë‹¤.
                    listItem.innerHTML = `
                            <img src="${imageUrl}" alt="${movie.title} poster">
                            <h3>${movie.title}</h3>
                            <p>(${movie.releaseYear})</p>
                        `;

                    // ì™„ì„±ëœ <li> íƒœê·¸ë¥¼ <ul> íƒœê·¸ì˜ ìì‹ìœ¼ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.
                    movieList.appendChild(listItem);
                });
            })
            .catch(error => {
                console.error('ì˜í™” ëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
            });
    });
</script>

</body>
</html>